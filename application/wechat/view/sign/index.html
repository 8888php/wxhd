<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
<meta name="format-detection" content="telephone=no">
<title>JS手机端日历签到特效 - 站长素材</title>
<link rel="stylesheet" href="__CDN__/assets/qd/public.css" />
<link rel="stylesheet" href="__CDN__/assets/qd/signin.css" />
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
</head>

<body>
<div class="top flex flex-align-end flex-pack-center flex-warp">
	<div class="out-1 flex flex-align-center flex-pack-center" id="signIn">
		<div class="out-2 flex flex-align-center flex-pack-center">
			<div class="signBtn">
				<strong id="sign-txt">签到</strong>
				<span>连续<em id="sign-count">0</em>天</span>
			</div>
		</div>
	</div>
</div>
<div class="tips">今天已签到，获得1个红包</div>
<div class="Calendar">
	<div id="toyear" class="flex flex-pack-center">
		<div id="idCalendarPre">&lt;</div>
		<div class="year-month">
			<span id="idCalendarYear">2018</span>年<span id="idCalendarMonth">6</span>月
		</div>
		<div id="idCalendarNext">&gt;</div>
	</div>
	<table border="1px" cellpadding="0" cellspacing="0">
		<thead>
			<tr class="tou">
				<td>日</td>
				<td>一</td>
				<td>二</td>
				<td>三</td>
				<td>四</td>
				<td>五</td>
				<td>六</td>
			</tr>
		</thead>
		<tbody id="idCalendar">
		</tbody>
	</table>
</div>
<script type="text/javascript" src="__CDN__/assets/qd/rili.js"></script>
<script language="JavaScript">
	var isSign = false;
	var myday = new Array(); //已签到的数组
//			myday[0] = "1528646400"
//			myday[1] = "1528387200"
//			myday[2] = "1525708800"

	var cale = new Calendar("idCalendar", {
		qdDay: myday,
		onToday: function(o) {
			o.className = "onToday";
		},
		onSignIn: function (){
			$$("sign-txt").innerHTML = '已签到';
		},
		onFinish: function() {
			$$("sign-count").innerHTML = myday.length //已签到次数
			$$("idCalendarYear").innerHTML = this.Year;
			$$("idCalendarMonth").innerHTML = this.Month; //表头年份

		}
	});
	$$("idCalendarPre").onclick = function() {
		cale.PreMonth();
	}
	$$("idCalendarNext").onclick = function() {
		cale.NextMonth();
	}
	//添加今天签到
	$$("signIn").onclick = function() {
		if(isSign == false) {
			var res = cale.SignIn();
			if(res == '1') {
				$$("sign-txt").innerHTML = '已签到';
				$$("sign-count").innerHTML = parseInt($$("sign-count").innerHTML) + 1;
				isSign = true;
			} else if (res == '2'){
				$$("sign-txt").innerHTML = '已签到';
				alert('今天已经签到了')
			}
		} else {
			alert('今天已经签到了')
		}

	}
</script>
<script type="text/javascript">
    wx.config({
        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
        appId: 'wx65d600347c7922fa', // 必填，公众号的唯一标识
        timestamp: '', // 必填，生成签名的时间戳
        nonceStr: '', // 必填，生成签名的随机串
        signature: '',// 必填，签名
        jsApiList: [] // 必填，需要使用的JS接口列表
    });
</script>
<div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';">
<p>适用浏览器：360、FireFox、Chrome、Safari、Opera、傲游、搜狗、世界之窗. 不支持IE8及以下浏览器。</p>
<p>来源：<a href="http://sc.chinaz.com/" target="_blank">站长素材</a></p>
</div>
</body>
</html>